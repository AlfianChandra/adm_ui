import{s as y}from"./index-B4i97k-5.js";import{s as D,a as A,b as F,c as r}from"./index-1Btzc3sr.js";import{r as N,g as O,d as v,t as I,u as q}from"./dayjs.min-fB-8Vcv2.js";import{s as B}from"./index-B0mQZDuz.js";import{r as J,s as P,a as E}from"./request-_NsyB8aS.js";import{s as H}from"./index-CbAGqZEX.js";import{d as G,u as Q,a as p,b as W,c as g,g as t,h as l,w as s,f as o,F as X,o as m,j as Z,A as i,i as d,v as S,e as ee}from"./index-BuQ8GHaj.js";import{s as U}from"./index-DnXQjg-K.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B2Ww7Ob3.js";var z={exports:{}},ae=z.exports,R;function le(){return R||(R=1,(function(C,M){(function(k,b){C.exports=b(N())})(ae,(function(k){function b(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var Y=b(k),c={name:"id",weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),weekStart:1,formats:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},ordinal:function(n){return n+"."}};return Y.default.locale(c,null,!0),c}))})(z)),z.exports}var oe=le();const se=O(oe),ne={class:"box-split"},ie={class:"box",style:{width:"100%"}},de={style:{display:"flex","flex-flow":"column",width:"40%"}},re={style:{display:"flex","flex-flow":"column",width:"100%"}},ue={key:0},pe={key:1},me={key:0,style:{"font-size":"13px",background:"orange",color:"white",padding:"0.2rem 0.5rem","border-radius":"5px","font-weight":"bold"}},fe={key:1,style:{"font-size":"13px",background:"green",color:"white",padding:"0.2rem 0.5rem","border-radius":"5px","font-weight":"bold"}},_e={key:2,style:{"font-size":"13px",background:"red",color:"white",padding:"0.2rem 0.5rem","border-radius":"5px","font-weight":"bold"}},ye={key:3,style:{"font-size":"13px",background:"grey",color:"white",padding:"0.2rem 0.5rem","border-radius":"5px","font-weight":"bold"}},ve={style:{display:"flex","flex-flow":"row nowrap",gap:"0.2rem"}},ge={style:{display:"flex","flex-flow":"column",gap:"0.5rem"}},be={style:{display:"flex","flex-flow":"column",gap:"0.1rem"}},xe={style:{color:"orange",margin:"0",padding:"0","font-size":"22px"}},ce={style:{display:"flex","flex-flow":"column",gap:"0.1rem"}},we={style:{color:"orange",margin:"0",padding:"0","font-size":"22px"}},ke={style:{display:"flex","flex-flow":"column",gap:"0.1rem"}},he={style:{color:"orange",margin:"0",padding:"0","font-size":"22px"}},je={style:{display:"flex","flex-flow":"column",gap:"0.1rem"}},Me={style:{color:"orange",margin:"0",padding:"0","font-size":"22px"}},Ye={style:{display:"flex","flex-flow":"column",gap:"0.1rem"}},De={style:{color:"orange",margin:"0",padding:"0","font-size":"22px"}},Se={style:{display:"flex","flex-flow":"column",gap:"0.1rem"}},ze={style:{color:"orange",margin:"0",padding:"0","font-size":"22px"}},Le={style:{display:"flex","flex-flow":"column",gap:"0.1rem"}},Pe={style:{color:"orange",margin:"0",padding:"0","font-size":"22px"}},Ce={key:0,style:{display:"flex","flex-flow":"row wrap",gap:"0.5rem","align-items":"center","justify-content":"center","margin-top":"1rem"}},Ve={style:{display:"flex","flex-flow":"column",gap:"0.5rem"}},Ae={style:{display:"flex","flex-flow":"column",width:"100%"}},Be={style:{display:"flex","flex-flow":"column",width:"100%"}},Je={style:{display:"flex","flex-flow":"column",width:"100%"}},He={style:{display:"flex","flex-flow":"row wrap",gap:"0.5rem","align-items":"center","justify-content":"center","margin-top":"1rem"}},Ue={style:{width:"250px",display:"flex","flex-flow":"column",gap:"0.5rem",padding:"0.5rem"}},Re={style:{width:"200px",display:"flex","flex-flow":"column",gap:"0.5rem"}},$e=G({__name:"PanelPengajuan",setup(C){v.extend(I),v.extend(q),v.locale(se);const M=Q(),k=p([{name:"Diajukan",code:"pending"},{name:"Disetujui",code:"approved"},{name:"Ditolak",code:"rejected"},{name:"Semua",code:"all"}]),b=p(k.value[0].code),Y=p([]),c=()=>{const x={status:b.value};J.post("pengajuan/adm/get-proposal",x).then(e=>{Y.value=e.payload}).catch(e=>{M.add({severity:"error",summary:"Gagal",detail:"Gagal mendapatkan data pengajuan",life:3e3})})},n=p({}),h=p(!1),L=p();W(()=>{c()});const j=p(!1),f=p({_id:"",no_surat:"",kode_registrasi:"",keadaan_barang:""}),$=()=>{J.post("pengajuan/adm/approve",f.value).then(x=>{M.add({severity:"success",summary:"Berhasil",detail:"Pengajuan disetujui dan BAST diterbitkan",life:3e3}),j.value=!1,h.value=!1,c()}).catch(x=>{console.error(x),M.add({severity:"error",summary:"Gagal",detail:"Gagal menyetujui pengajuan",life:3e3})})},w=p({}),V=p(null),T=()=>{w.value.human_date=v().tz("Asia/Jakarta").format("DD MMMM YYYY"),w.value.date=v(w.value.date).tz("Asia/Jakarta").format("dddd, DD MMMM YYYY"),E.post("https://pdf.imanextgencbt.id/pdf/inv/bast",w.value).then(x=>{const e=x.data.data,u=new Blob([Uint8Array.from(atob(e),K=>K.charCodeAt(0))],{type:"application/pdf"}),a=URL.createObjectURL(u),_=document.createElement("a");_.href=a,_.download=`BAST_${v().format("YYYYMMDD_HHmmss")}.pdf`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(a)})};return(x,e)=>{const u=Z("fasicon");return m(),g(X,null,[e[32]||(e[32]=t("h1",null,"Pengajuan",-1)),t("div",ne,[t("div",ie,[t("div",de,[l(o(D),{variant:"on"},{default:s(()=>[l(o(F),{onChange:c,modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),options:k.value,"option-label":"name","option-value":"code",placeholder:"Pilih Status",style:{width:"100%"}},null,8,["modelValue","options"]),e[9]||(e[9]=t("label",null,"Filter Status",-1))]),_:1,__:[9]})]),t("div",re,[l(o(A),{value:Y.value},{default:s(()=>[l(o(r),null,{body:s(({})=>[l(u,{icon:"file-lines"})]),_:1}),l(o(r),{header:"ID Dokumen",style:{width:"20%"}},{body:s(({data:a})=>[t("code",null,i(a._id),1)]),_:1}),l(o(r),{header:"Pemohon",style:{width:"20%"}},{body:s(({data:a})=>[d(i(a.name),1)]),_:1}),l(o(r),{header:"Jenis",style:{width:"20%"}},{body:s(({data:a})=>[a.jenis_barang==="inv_common"?(m(),g("span",ue,"Umum")):a.jenis_barang==="inv_laptop"?(m(),g("span",pe,"Khusus (Laptop)")):S("",!0)]),_:1}),l(o(r),{header:"Diajukan",style:{width:"20%"}},{body:s(({data:a})=>[t("code",null,i(o(v).utc(a.date).tz("Asia/Jakarta").format("ddd, DD MMM YYYY HH:mm:ss")),1)]),_:1}),l(o(r),{header:"Status",style:{width:"20%"}},{body:s(({data:a})=>[a.status==="pending"?(m(),g("span",me,"Diajukan")):a.status==="approved"?(m(),g("span",fe,"Disetujui")):a.status==="rejected"?(m(),g("span",_e,"Ditolak")):a.status==="draft"?(m(),g("span",ye,"Draft")):S("",!0)]),_:1}),l(o(r),null,{body:s(({data:a})=>[t("div",ve,[l(o(y),{onClick:_=>{n.value=a,f.value._id=a._id,h.value=!0}},{default:s(()=>[l(u,{icon:"search"}),e[10]||(e[10]=d(" Review",-1))]),_:2,__:[10]},1032,["onClick"]),a.status==="approved"?(m(),ee(o(y),{key:0,onClick:_=>{V.value.toggle(_),w.value=a,console.log(w.value)}},{default:s(()=>[l(u,{icon:"ellipsis-vertical"})]),_:2},1032,["onClick"])):S("",!0)])]),_:1})]),_:1},8,["value"])])])]),l(o(H),{visible:h.value,"onUpdate:visible":e[2]||(e[2]=a=>h.value=a),modal:!0,closable:!0,style:{width:"800px"},header:"Review Pengajuan",draggable:!0},{default:s(()=>[t("div",ge,[t("div",be,[e[11]||(e[11]=t("label",{style:{"font-size":"12px"}},"Pemohon",-1)),t("h4",xe,i(n.value.name),1)]),t("div",ce,[e[12]||(e[12]=t("label",{style:{"font-size":"12px"}},"NIP",-1)),t("h4",we,i(n.value.nip),1)]),t("div",ke,[e[13]||(e[13]=t("label",{style:{"font-size":"12px"}},"Jabatan",-1)),t("h4",he,i(n.value.jabatan),1)]),t("div",je,[e[14]||(e[14]=t("label",{style:{"font-size":"12px"}},"E-mail",-1)),t("h4",Me,i(n.value.email),1)]),l(o(B)),t("div",Ye,[e[15]||(e[15]=t("label",{style:{"font-size":"12px"}},"Jenis Barang",-1)),t("h4",De,i(n.value.jenis_barang==="inv_common"?"Umum":"Khusus (Laptop)"),1)]),t("div",Se,[e[16]||(e[16]=t("label",{style:{"font-size":"12px"}},"Diajukan",-1)),t("h4",ze,i(o(v).utc(n.value.date).tz("Asia/Jakarta").format("ddd, DD MMMM YYYY HH:mm"))+" WIB",1)]),t("div",Le,[e[17]||(e[17]=t("label",{style:{"font-size":"12px"}},"Unit Penempatan",-1)),t("h4",Pe,i(n.value.penempatan),1)]),l(o(B)),e[18]||(e[18]=t("h4",{style:{padding:"0",margin:"0"}},"Rincian Barang:",-1)),l(o(A),{value:n.value.items,responsiveLayout:"scroll"},{default:s(()=>[l(o(r),{header:"Barang",style:{width:"5%"}},{body:s(({data:a})=>[d(i(a.inv.nama),1)]),_:1}),l(o(r),{header:"Kode",style:{width:"5%"}},{body:s(({data:a})=>[d(i(a.inv.kode_aset),1)]),_:1}),l(o(r),{header:"Kode",style:{width:"5%"}},{body:s(({data:a})=>[d(i(a.inv.jenis),1)]),_:1}),l(o(r),{header:"Sub-jenis",style:{width:"5%"}},{body:s(({data:a})=>[d(i(a.inv.sub_jenis),1)]),_:1}),l(o(r),{header:"Qty",style:{width:"5%"}},{body:s(({data:a})=>[d(i(a.qty)+"x ",1)]),_:1})]),_:1},8,["value"])]),n.value.status!=="approved"?(m(),g("div",Ce,[l(o(y),{onClick:e[1]||(e[1]=a=>L.value.toggle(a))},{default:s(()=>[l(u,{icon:"check"}),e[19]||(e[19]=d(" Setujui Pengajuan",-1))]),_:1,__:[19]}),l(o(y),{class:"p-button-danger"},{default:s(()=>[l(u,{icon:"times"}),e[20]||(e[20]=d(" Tolak Pengajuan",-1))]),_:1,__:[20]})])):S("",!0)]),_:1},8,["visible"]),l(o(H),{visible:j.value,"onUpdate:visible":e[7]||(e[7]=a=>j.value=a),modal:!0,closable:!0,style:{width:"500px"},header:"Form Persetujuan",draggable:!0},{default:s(()=>[t("div",Ve,[e[24]||(e[24]=t("p",null,"Isi data dokumen berikut untuk menyetujui pengajuan",-1)),t("div",Ae,[l(o(D),{variant:"in"},{default:s(()=>[l(o(P),{modelValue:f.value.no_surat,"onUpdate:modelValue":e[3]||(e[3]=a=>f.value.no_surat=a),style:{width:"100%"}},null,8,["modelValue"]),e[21]||(e[21]=t("label",null,"Nomor Surat",-1))]),_:1,__:[21]})]),t("div",Be,[l(o(D),{variant:"in"},{default:s(()=>[l(o(P),{modelValue:f.value.kode_registrasi,"onUpdate:modelValue":e[4]||(e[4]=a=>f.value.kode_registrasi=a),style:{width:"100%"}},null,8,["modelValue"]),e[22]||(e[22]=t("label",null,"Kode Registrasi",-1))]),_:1,__:[22]})]),t("div",Je,[l(o(D),{variant:"in"},{default:s(()=>[l(o(P),{modelValue:f.value.keadaan_barang,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value.keadaan_barang=a),style:{width:"100%"}},null,8,["modelValue"]),e[23]||(e[23]=t("label",null,"Keadaan Barang",-1))]),_:1,__:[23]})])]),t("div",He,[l(o(y),{onClick:$},{default:s(()=>[l(u,{icon:"check"}),e[25]||(e[25]=d(" Setujui & Terbit BAST",-1))]),_:1,__:[25]}),l(o(y),{class:"p-button-danger",onClick:e[6]||(e[6]=a=>j.value=!1)},{default:s(()=>[l(u,{icon:"times"}),e[26]||(e[26]=d(" Batal",-1))]),_:1,__:[26]})])]),_:1},8,["visible"]),l(o(U),{ref_key:"approveOp",ref:L},{default:s(()=>[t("div",Ue,[e[28]||(e[28]=t("label",null,[t("b",null,"Setujui")],-1)),e[29]||(e[29]=t("p",{style:{padding:"0",margin:"0"}},"Anda yakin ingin menyetujui pengajuan ini?",-1)),l(o(y),{onClick:e[8]||(e[8]=a=>{j.value=!0,h.value=!1,L.value.hide()})},{default:s(()=>e[27]||(e[27]=[d("Ya, Lanjutkan",-1)])),_:1,__:[27]})])]),_:1},512),l(o(U),{ref_key:"docOp",ref:V},{default:s(()=>[t("div",Re,[e[31]||(e[31]=t("label",null,[t("b",null,"Dokumen")],-1)),l(o(y),{onClick:T},{default:s(()=>[l(u,{icon:"file-lines"}),e[30]||(e[30]=d(" Print BAST",-1))]),_:1,__:[30]})])]),_:1},512)],64)}}}),We=te($e,[["__scopeId","data-v-de6dabd6"]]);export{We as default};
