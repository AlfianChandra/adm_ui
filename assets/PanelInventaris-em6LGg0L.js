import{s as j}from"./index-B4i97k-5.js";import{d as I,u as A,a as m,b as C,c as G,g as s,h as n,i as v,j as N,w as i,f as t,F as $,o as S,A as y}from"./index-BuQ8GHaj.js";import{s as U}from"./index-DnXQjg-K.js";import{s as f,a as E,b as L,d as M,c as p}from"./index-1Btzc3sr.js";import{s as V,r as g}from"./request-_NsyB8aS.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B2Ww7Ob3.js";const J={class:"box-split"},H={class:"box",style:{width:"40%"}},O={style:{margin:"0",padding:"0"}},q={class:"box",style:{width:"80%"}},z={style:{margin:"0",padding:"0"}},Q={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-start","align-items":"center",gap:"1rem"}},R=["onFocusout"],W=["onFocusout"],X=["onFocusout"],Y=["onFocusout"],Z={style:{width:"250px",display:"flex","flex-flow":"column",gap:"0.5rem"}},ee=I({__name:"PanelInventaris",setup(ae){const d=A(),x=m([{name:"Elektronik",code:"Elektronik"},{name:"Furniture",code:"Furniture"},{name:"Alat Tulis Kantor",code:"ATK"},{name:"Lainnya",code:"Lainnya"}]),B=m({Elektronik:[{name:"Laptop",code:"Laptop"},{name:"Proyektor",code:"Proyektor"},{name:"Printer",code:"Printer"},{name:"Lainnya",code:"Lainnya"}],Furniture:[{name:"Meja",code:"Meja"},{name:"Kursi",code:"Kursi"},{name:"Lemari",code:"Lemari"},{name:"Lainnya",code:"Lainnya"}],ATK:[{name:"Pulpen",code:"Pulpen"},{name:"Buku Tulis",code:"Buku Tulis"},{name:"Spidol",code:"Spidol"},{name:"Lainnya",code:"Lainnya"}],Lainnya:[{name:"Lainnya",code:"Lainnya"}]}),b=m(""),k=m([]),_=()=>{k.value=[],g.post("inventory/search",{searchKey:b.value}).then(l=>{k.value=l.payload}).catch(l=>{d.add({severity:"error",summary:"Gagal",detail:"Gagal mendapatkan data inventaris",life:3e3})})},o=m({nama:"",kode_aset:"",jenis:"",sub_jenis:"",stok:1}),P=()=>{if(o.value.nama.trim()===""||o.value.kode_aset.trim()===""||o.value.jenis.trim()===""){d.add({severity:"warn",summary:"Peringatan",detail:"Nama barang, kode aset, dan jenis tidak boleh kosong",life:3e3});return}if(o.value.stok<=0){d.add({severity:"warn",summary:"Peringatan",detail:"Masukkan nilai stok yang sesuai",life:3e3});return}g.post("inventory/create",o.value).then(l=>{d.add({severity:"success",summary:"Berhasil",detail:"Berhasil menambahkan inventaris",life:3e3}),o.value={nama:"",kode_aset:"",jenis:"",sub_jenis:"",stok:1},_()}).catch(l=>{d.add({severity:"error",summary:"Gagal",detail:"Gagal menambahkan inventaris",life:3e3})})},c=(l,e,u)=>{const a=l.target.innerText;if(a.trim()===""){d.add({severity:"warn",summary:"Peringatan",detail:"Nama barang tidak boleh kosong",life:3e3}),l.target.innerText=e[u],l.target.focus();return}if(a===e[u])return;let r={_id:e._id};r[u]=a,g.post("inventory/update",r).then(K=>{d.add({severity:"success",summary:"Berhasil",detail:"Berhasil memperbarui nama barang",life:3e3})}).catch(K=>{d.add({severity:"error",summary:"Gagal",detail:"Gagal memperbarui nama barang",life:3e3}),l.target.innerText=e[u]})},w=m(null),h=m(null),F=(l,e)=>{w.value=e,h.value.toggle(l)},T=()=>{g.post("inventory/delete",{_id:w.value._id}).then(l=>{d.add({severity:"success",summary:"Berhasil",detail:"Berhasil menghapus inventaris",life:3e3}),_(),h.value.hide()}).catch(l=>{d.add({severity:"error",summary:"Gagal",detail:"Gagal menghapus inventaris",life:3e3})})};return C(()=>{_()}),(l,e)=>{const u=N("fasicon");return S(),G($,null,[e[18]||(e[18]=s("h1",null,"Kelola Inventaris",-1)),s("div",J,[s("div",H,[s("h5",O,[n(u,{icon:"plus-circle"}),e[6]||(e[6]=v(" Tambah Inventaris",-1))]),n(t(f),{variant:"on"},{default:i(()=>[n(t(V),{modelValue:o.value.nama,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.nama=a),id:"in",style:{width:"100%"}},null,8,["modelValue"]),e[7]||(e[7]=s("label",{for:"in"},"Nama Barang",-1))]),_:1,__:[7]}),n(t(f),{variant:"on"},{default:i(()=>[n(t(V),{modelValue:o.value.kode_aset,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.kode_aset=a),id:"in",style:{width:"100%"}},null,8,["modelValue"]),e[8]||(e[8]=s("label",{for:"in"},"Kode Aset",-1))]),_:1,__:[8]}),n(t(f),{variant:"on"},{default:i(()=>[n(t(L),{modelValue:o.value.jenis,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.jenis=a),id:"in",options:x.value,"option-label":"name","option-value":"code",style:{width:"100%"}},null,8,["modelValue","options"]),e[9]||(e[9]=s("label",{for:"in"},"Jenis",-1))]),_:1,__:[9]}),n(t(f),{variant:"on"},{default:i(()=>[n(t(L),{modelValue:o.value.sub_jenis,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.sub_jenis=a),id:"in",options:B.value[o.value.jenis],"option-label":"name","option-value":"code",style:{width:"100%"}},null,8,["modelValue","options"]),e[10]||(e[10]=s("label",{for:"in"},"Sub-jenis",-1))]),_:1,__:[10]}),n(t(f),{variant:"on"},{default:i(()=>[n(t(M),{modelValue:o.value.stok,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.stok=a),id:"in",style:{width:"100%"}},null,8,["modelValue"]),e[11]||(e[11]=s("label",{for:"in"},"Stok tersedia",-1))]),_:1,__:[11]}),n(t(j),{onClick:P},{default:i(()=>[n(u,{icon:"plus-circle"}),e[12]||(e[12]=v(" Tambah Barang",-1))]),_:1,__:[12]})]),s("div",q,[s("h5",z,[n(u,{icon:"list"}),e[13]||(e[13]=v(" List Inventaris",-1))]),s("div",Q,[n(t(V),{onKeyup:_,modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=a=>b.value=a),placeholder:"Cari inventaris...",style:{width:"50%"}},null,8,["modelValue"])]),n(t(E),{value:k.value,responsiveLayout:"scroll",style:{"margin-top":"1rem"}},{default:i(()=>[n(t(p),{header:"Nama Barang"},{body:i(({data:a})=>[s("span",{onFocusout:r=>c(r,a,"nama"),contenteditable:""},y(a.nama),41,R)]),_:1}),n(t(p),{header:"Kode Aset"},{body:i(({data:a})=>[e[14]||(e[14]=v(" #",-1)),s("span",{onFocusout:r=>c(r,a,"kode_aset"),contenteditable:""},y(a.kode_aset),41,W)]),_:1}),n(t(p),{header:"Jenis"},{body:i(({data:a})=>[s("span",null,y(a.jenis),1)]),_:1}),n(t(p),{header:"Sub-jenis"},{body:i(({data:a})=>[s("span",{onFocusout:r=>c(r,a,"sub_jenis"),contenteditable:""},y(a.sub_jenis?a.sub_jenis:"Lainnya"),41,X)]),_:1}),n(t(p),{header:"Tersedia"},{body:i(({data:a})=>[s("span",{onFocusout:r=>c(r,a,"stok"),contenteditable:""},y(a.stok!=null?a.stok:0),41,Y)]),_:1}),n(t(p),{header:"Aksi"},{body:i(({data:a})=>[n(t(j),{onClick:r=>F(r,a),icon:"pi pi-trash",class:"p-button-rounded p-button-danger p-button-outlined"},null,8,["onClick"])]),_:1})]),_:1},8,["value"])])]),n(t(U),{ref_key:"confirmDeleteOp",ref:h},{default:i(()=>[s("div",Z,[e[16]||(e[16]=s("h5",{style:{margin:"0",padding:"0"}},"Konfirmasi Hapus",-1)),e[17]||(e[17]=s("p",{style:{margin:"0",padding:"0"}},"Apakah Anda yakin ingin menghapus item ini?",-1)),n(t(j),{onClick:T},{default:i(()=>[n(u,{icon:"trash"}),e[15]||(e[15]=v(" Hapus",-1))]),_:1,__:[15]})])]),_:1},512)],64)}}}),de=D(ee,[["__scopeId","data-v-34c8cf7a"]]);export{de as default};
